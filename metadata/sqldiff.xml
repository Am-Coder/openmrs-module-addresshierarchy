<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqldiff PUBLIC "-//OpenMRS//DTD OpenMRS SQL Diff Config 1.0//EN" "http://resources.openmrs.org/doctype/sqldiff-1.0.dtd">

<sqldiff version="1.0">
	<help>
		USE:
			The diffs are ordered by datamodel version number.
			The script can be run in a top down fashion and is
			expected to not failor overwrite old data
		
		EXPECT:
			- "use business-database-name;" was called prior to
			   calling this script
	</help>
	
	<diff>
		<version>1.0</version>
		<author>Sri Prasanna</author>
		<date>May 28th 2008</date>
		<description>
			Address hierarchy type table. It stores the hierarchy components and its type ID.
			Address hierarchy table. It stores the hierarchy component values.
		</description>
		<sql>
			CREATE TABLE IF NOT EXISTS address_hierarchy_type
            (
            	location_attribute_type_id int(11) NOT NULL auto_increment,
                name varchar(160) NOT NULL,
                PRIMARY KEY (location_attribute_type_id)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
            
			CREATE TABLE IF NOT EXISTS address_hierarchy
            (
            	location_attribute_type_value_id int(11) NOT NULL auto_increment,
                name varchar(160) NOT NULL,
                type_id int(11) NOT NULL,
                parent_location_attribute_type_value_id int(11),
                PRIMARY KEY (`location_attribute_type_value_id`),
                KEY `parent_location_id` (`parent_location_attribute_type_value_id`),
                KEY `location_type_id` (`type_id`),
                CONSTRAINT `parent_location_id` FOREIGN KEY (`parent_location_attribute_type_value_id`) REFERENCES `address_hierarchy` (`location_attribute_type_value_id`),
                CONSTRAINT `location_type_id` FOREIGN KEY (`type_id`) REFERENCES `address_hierarchy_type` (`location_attribute_type_id`)
			) ENGINE=InnoDB DEFAULT CHARSET=utf8;
			

INSERT INTO address_hierarchy_type (name) VALUES ('Sub Location 1');
INSERT INTO address_hierarchy_type (name) VALUES ('Sub Location 2');
INSERT INTO address_hierarchy_type (name) VALUES ('Sub Location 3');
INSERT INTO address_hierarchy_type (name) VALUES ('Sub Location 4');
INSERT INTO address_hierarchy_type (name) VALUES ('Sub Location 5');
INSERT INTO address_hierarchy_type (name) VALUES ('Sub Location 6');
INSERT INTO address_hierarchy_type (name) VALUES ('Sub Location 7');
INSERT INTO address_hierarchy_type (name) VALUES ('Sub Location 8');
INSERT INTO address_hierarchy_type (name) VALUES ('Postal Code');
INSERT INTO address_hierarchy_type (name) VALUES ('Longitude');
INSERT INTO address_hierarchy_type (name) VALUES ('Latitude'); 
		</sql>
	</diff>
	
</sqldiff>
